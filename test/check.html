<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KYC Onboarding</title>
<script src="https://accounts.google.com/gsi/client" async defer></script>

<style>
* { box-sizing: border-box; margin: 0; padding: 0; }
body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 20px;
}
.container {
  background: #fff;
  border-radius: 16px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.2);
  width: 100%;
  max-width: 520px;
  padding: 30px;
}
h1 { text-align: center; margin-bottom: 6px; }
.subtitle { text-align: center; color: #666; margin-bottom: 20px; }
.form-group { margin-bottom: 18px; }
label { display: block; font-weight: 600; margin-bottom: 6px; }
input[type="text"], input[type="tel"] {
  width: 100%;
  padding: 12px;
  border-radius: 8px;
  border: 1px solid #ccc;
}
.file-box {
  border: 2px dashed #cbd5e0;
  border-radius: 8px;
  padding: 16px;
  text-align: center;
  cursor: pointer;
}
.file-box.has-file {
  border-color: #48bb78;
  background: #f0fff4;
}
.file-box input { display: none; }
.file-name { font-size: 12px; margin-top: 6px; }
.camera-preview {
  width: 100%;
  max-width: 320px;
  border: 2px solid #ccc;
  margin-top: 10px;
}
button {
  width: 100%;
  padding: 14px;
  border-radius: 8px;
  border: none;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: #fff;
  font-weight: 600;
  cursor: pointer;
}
button.secondary {
  background: #edf2f7;
  color: #333;
  margin-top: 8px;
}
.status {
  font-size: 13px;
  margin-top: 6px;
}
.status.ok { color: #2f855a; }
</style>
</head>

<body>
<div class="container">
<h1>üîê KYC Form</h1>
<p class="subtitle">Upload documents and verify identity</p>

<form id="kycForm">

<div class="form-group">
<label>Full Name</label>
<input type="text" id="fullName" required>
</div>

<div class="form-group">
<label>ID Number</label>
<input type="text" id="idNumber" required>
</div>

<div class="form-group">
<label>Phone</label>
<input type="tel" id="phone" required>
</div>

<div class="form-group">
<label>Address</label>
<input type="text" id="address" required>
</div>

<h3>Required Documents</h3>

<div class="form-group">
<label>ID Front</label>
<div class="file-box" id="idFrontBox">
<input type="file" id="idFront" accept="image/*,.pdf" required>
<span>Upload ID Front</span>
<div class="file-name" id="idFrontName"></div>
</div>
</div>

<div class="form-group">
<label>ID Back</label>
<div class="file-box" id="idBackBox">
<input type="file" id="idBack" accept="image/*,.pdf" required>
<span>Upload ID Back</span>
<div class="file-name" id="idBackName"></div>
</div>
</div>

<div class="form-group">
<label>Proof of Address</label>
<div class="file-box" id="poaBox">
<input type="file" id="proofAddress" accept="image/*,.pdf" required>
<span>Upload Proof of Address</span>
<div class="file-name" id="poaName"></div>
</div>
</div>

<h3>Passport Photo</h3>

<p style="font-size:13px;color:#555;">
Upload a photo OR take a live photo using your camera.
</p>

<div class="form-group">
<div class="file-box" id="passportUploadBox">
<input type="file" id="passportUpload" accept="image/*">
<span>Upload Passport Photo</span>
<div class="file-name" id="passportUploadName"></div>
</div>
</div>

<button type="button" class="secondary" id="openCamera">üì∑ Take Live Photo</button>

<div id="cameraSection" style="display:none;">
<video id="video" class="camera-preview" autoplay></video>
<canvas id="canvas" class="camera-preview" style="display:none;"></canvas>
<button type="button" id="capture">Capture Photo</button>
<button type="button" class="secondary" id="retake" style="display:none;">Retake</button>
</div>

<div class="status" id="passportStatus"></div>

<button type="submit" style="margin-top:20px;">Submit KYC</button>

</form>
</div>

<script>
const files = [
  ['idFront','idFrontBox','idFrontName'],
  ['idBack','idBackBox','idBackName'],
  ['proofAddress','poaBox','poaName'],
  ['passportUpload','passportUploadBox','passportUploadName']
];

files.forEach(([id,box,name])=>{
  const input=document.getElementById(id);
  const boxEl=document.getElementById(box);
  const nameEl=document.getElementById(name);
  if(!input) return;
  input.addEventListener('change',e=>{
    if(e.target.files.length){
      boxEl.classList.add('has-file');
      nameEl.textContent='‚úì '+e.target.files[0].name;
    }
  });
});

let stream=null;
let passportLiveFile=null;

document.getElementById('openCamera').onclick=async()=>{
  stream=await navigator.mediaDevices.getUserMedia({video:{facingMode:'user'}});
  document.getElementById('cameraSection').style.display='block';
  document.getElementById('video').srcObject=stream;
};

document.getElementById('capture').onclick=()=>{
  const video=document.getElementById('video');
  const canvas=document.getElementById('canvas');
  canvas.width=video.videoWidth;
  canvas.height=video.videoHeight;
  canvas.getContext('2d').drawImage(video,0,0);
  canvas.toBlob(blob=>{
    passportLiveFile=new File([blob],'passport_live.jpg',{type:'image/jpeg'});
    document.getElementById('passportStatus').textContent='‚úì Live photo captured';
    document.getElementById('passportStatus').className='status ok';
    video.style.display='none';
    canvas.style.display='block';
    document.getElementById('capture').style.display='none';
    document.getElementById('retake').style.display='block';
  },'image/jpeg',0.9);
};

document.getElementById('retake').onclick=()=>{
  passportLiveFile=null;
  document.getElementById('video').style.display='block';
  document.getElementById('canvas').style.display='none';
  document.getElementById('capture').style.display='block';
  document.getElementById('retake').style.display='none';
};

</script>
</body>
</html>