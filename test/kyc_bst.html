<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>Onboarding KYC Form</title> <script src="https://accounts.google.com/gsi/client" async defer></script> <style> * { box-sizing: border-box; margin: 0; padding: 0; } body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: linear-gradient(135deg, #667eea 0percent, #764ba2 100percent); min-height: 100vh; display: flex; justify-content: center; align-items: center; padding: 20px; } .container { background: #fff; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); width: 100percent; max-width: 500px; padding: 30px; } h1 { font-size: 24px; margin-bottom: 8px; color: #2d3748; text-align: center; } .subtitle { font-size: 14px; color: #718096; margin-bottom: 20px; text-align: center; } .form-group { margin-bottom: 20px; width: 100percent; } label { display: block; margin-bottom: 6px; font-weight: 600; font-size: 14px; color: #2d3748; } .required { color: #e53e3e; } input[type="text"], input[type="tel"] { width: 100percent; padding: 14px; border: 1.5px solid #cbd5e0; border-radius: 8px; font-size: 15px; } input:focus { border-color: #667eea; outline: none; } .file-upload { border: 2px dashed #cbd5e0; border-radius: 8px; padding: 18px; text-align: center; cursor: pointer; background: #f7fafc; transition: all 0.2s; } .file-upload:hover { border-color: #667eea; background: #edf2f7; } .file-upload.has-file { border-color: #48bb78; background: #f0fff4; } .file-upload input { display: none; } .file-upload-label { display: flex; flex-direction: column; align-items: center; gap: 6px; font-size: 14px; } .upload-icon { font-size: 28px; } .file-name { font-size: 12px; color: #4a5568; margin-top: 4px; word-break: break-word; } .progress { height: 6px; background: #edf2f7; border-radius: 4px; margin-top: 8px; display: none; } .progress-bar { height: 100percent; width: 0percent; background: #667eea; border-radius: 4px; } .submit-btn { width: 100percent; padding: 16px; background: linear-gradient(135deg, #667eea 0percent, #764ba2 100percent); color: #fff; border: none; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.2s; } .submit-btn:hover:not(:disabled) { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(102,126,234,0.3); } .submit-btn:disabled { opacity: 0.6; cursor: not-allowed; } .loading { display: none; text-align: center; padding: 20px; } .loading.active { display: block; } .spinner { border: 3px solid #f3f4f6; border-top: 3px solid #667eea; border-radius: 50percent; width: 36px; height: 36px; animation: spin 1s linear infinite; margin: 0 auto 10px; } @keyframes spin { 0percent { transform: rotate(0deg); } 100percent { transform: rotate(360deg); } } .result { display: none; margin-top: 20px; padding: 18px; border-radius: 8px; font-size: 14px; } .result.active { display: block; } .result.success { background: #f0fff4; border: 1.5px solid #48bb78; color: #2f855a; } .result.error { background: #fff5f5; border: 1.5px solid #f56565; color: #c53030; } .result-title { font-weight: 700; margin-bottom: 6px; } .result-data { background: #f7fafc; padding: 12px; border-radius: 6px; font-family: monospace; font-size: 12px; max-height: 250px; overflow-y: auto; word-wrap: break-word; } </style> </head> <body> <div class="container"> <h1>üîê KYC Form</h1> <p class="subtitle">Submit your documents</p> <form id="kycForm"> <div class="form-group"> <label for="fullName">Full Name <span class="required">*</span></label> <input type="text" id="fullName" name="fullName" required autocomplete="name"> </div>
<div class="form-group">
  <label for="idNumber">ID Number <span class="required">*</span></label>
  <input type="text" id="idNumber" name="idNumber" required>
</div>

<div class="form-group">
  <label for="phone">Phone Number <span class="required">*</span></label>
  <input type="tel" id="phone" name="phone" required autocomplete="tel">
</div>

<div class="form-group">
  <label for="address">Address <span class="required">*</span></label>
  <input type="text" id="address" name="address" required>
</div>

<h3 style="margin:20px 0 12px; color:#2d3748;">Upload Documents</h3>

<div class="form-group">
  <label for="idFront">ID Front <span class="required">*</span></label>
  <div class="file-upload" id="idFrontUpload">
    <input type="file" id="idFront" accept="image/*" required>
    <label class="file-upload-label" for="idFront">
      <span class="upload-icon">üì∏</span>
      <span>Upload ID Front</span>
      <span class="file-name" id="idFrontName"></span>
    </label>
  </div>
  <div class="progress" id="progress-idFront"><div class="progress-bar" id="bar-idFront"></div></div>
</div>

<div class="form-group">
  <label for="idBack">ID Back <span class="required">*</span></label>
  <div class="file-upload" id="idBackUpload">
    <input type="file" id="idBack" accept="image/*" required>
    <label class="file-upload-label" for="idBack">
      <span class="upload-icon">üì∏</span>
      <span>Upload ID Back</span>
      <span class="file-name" id="idBackName"></span>
    </label>
  </div>
  <div class="progress" id="progress-idBack"><div class="progress-bar" id="bar-idBack"></div></div>
</div>

<div class="form-group">
  <label for="proofAddress">Proof of Address <span class="required">*</span></label>
  <div class="file-upload" id="proofAddressUpload">
    <input type="file" id="proofAddress" accept="image/*,application/pdf" required>
    <label class="file-upload-label" for="proofAddress">
      <span class="upload-icon">üìÑ</span>
      <span>Upload Proof of Address</span>
      <span class="file-name" id="proofAddressName"></span>
    </label>
  </div>
  <div class="progress" id="progress-proofAddress"><div class="progress-bar" id="bar-proofAddress"></div></div>
</div>

<button type="submit" class="submit-btn">Submit KYC</button>

</form> <div class="loading" id="loading"> <div class="spinner"></div> <p>Processing your KYC application...</p> </div> <div class="result" id="result"> <div class="result-title" id="resultTitle"></div> <div class="result-data" id="resultData"></div> </div> </div> <script> const driveFolderId = "YOUR_FOLDER_ID"; const googleClientId = "YOUR_GOOGLE_CLIENT_ID"; function generateAppId() { const t = Date.now().toString(36).toUpperCase(); const r = Math.random().toString(36).substring(2, 7).toUpperCase(); return "KYC-" + t + "-" + r; } function displayPreview(input, uploadEl) { const file = input.files[0]; if (!file) return; const url = URL.createObjectURL(file); uploadEl.querySelectorAll("img").forEach(x => x.remove()); if (file.type.startsWith("image")) { const img = document.createElement("img"); img.src = url; img.style.width = "80px"; img.style.marginTop = "8px"; img.style.borderRadius = "6px"; img.style.boxShadow = "0 2px 6px rgba(0,0,0,0.15)"; uploadEl.appendChild(img); } } const fileInputs = [ { input: 'idFront', upload: 'idFrontUpload', name: 'idFrontName' }, { input: 'idBack', upload: 'idBackUpload', name: 'idBackName' }, { input: 'proofAddress', upload: 'proofAddressUpload', name: 'proofAddressName' } ]; fileInputs.forEach(({ input, upload, name }) => { const inputEl = document.getElementById(input); const uploadEl = document.getElementById(upload); const nameEl = document.getElementById(name); inputEl.addEventListener('change', (e) => { if (e.target.files.length > 0) { nameEl.textContent = "‚úì " + e.target.files[0].name; uploadEl.classList.add('has-file'); displayPreview(inputEl, uploadEl); } else { nameEl.textContent = ""; uploadEl.classList.remove('has-file'); } }); }); async function getAccessToken() { return new Promise((resolve, reject) => { google.accounts.oauth2 .initTokenClient({ client_id: googleClientId, scope: "https://www.googleapis.com/auth/drive.file", callback: r => r.access_token ? resolve(r.access_token) : reject("No access token") }) .requestAccessToken(); }); } async function uploadToDrive(file, token, barId, progressId) { const metadata = { name: file.name, mimeType: file.type, parents: [driveFolderId] }; const start = await fetch( "https://www.googleapis.com/upload/drive/v3/files?uploadType=resumable", { method: "POST", headers: { Authorization: "Bearer " + token, "Content-Type": "application/json" }, body: JSON.stringify(metadata) } ); const uploadUrl = start.headers.get("Location"); const bar = document.getElementById(barId); const wrap = document.getElementById(progressId); wrap.style.display = "block"; return new Promise((resolve, reject) => { const xhr = new XMLHttpRequest(); xhr.open("PUT", uploadUrl, true); xhr.setRequestHeader("Authorization", "Bearer " + token); xhr.upload.onprogress = e => { if (e.lengthComputable) { const percent = (e.loaded / e.total) * 100; bar.style.width = percent + "%"; } }; xhr.onload = () => { if (xhr.status === 200) resolve(JSON.parse(xhr.responseText).id); else reject("Upload failed"); }; xhr.onerror = reject; xhr.send(file); }); } document.getElementById('kycForm').addEventListener('submit', async (e) => { e.preventDefault(); const loading = document.getElementById('loading'); const result = document.getElementById('result'); const title = document.getElementById('resultTitle'); const data = document.getElementById('resultData'); loading.classList.add('active'); result.className = 'result'; try { const token = await getAccessToken(); const appId = generateAppId(); const idFront = document.getElementById('idFront').files[0]; const idBack = document.getElementById('idBack').files[0]; const poa = document.getElementById('proofAddress').files[0]; const idFrontFile = new File([idFront], appId + "-ID-FRONT." + idFront.name.split('.').pop()); const idBackFile = new File([idBack], appId + "-ID-BACK." + idBack.name.split('.').pop()); const poaFile = new File([poa], appId + "-POA." + poa.name.split('.').pop()); const idFrontId = await uploadToDrive(idFrontFile, token, "bar-idFront", "progress-idFront"); const idBackId = await uploadToDrive(idBackFile, token, "bar-idBack", "progress-idBack"); const poaId = await uploadToDrive(poaFile, token, "bar-proofAddress", "progress-proofAddress"); const payload = { app_id: appId, full_name: document.getElementById('fullName').value, id_number: document.getElementById('idNumber').value, phone: document.getElementById('phone').value, address: document.getElementById('address').value, id_front_file_id: idFrontId, id_back_file_id: idBackId, poa_file_id: poaId }; const response = await fetch("https://api.morningsidezw.com/submit", { method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify(payload) }); const txt = await response.text(); loading.classList.remove('active'); result.className = response.ok ? "result active success" : "result active error"; title.textContent = response.ok ? "KYC submitted successfully" : "Error " + response.status; data.textContent = txt; } catch (err) { loading.classList.remove('active'); result.className = "result active error"; title.textContent = "Unexpected error"; data.textContent = err.message; } }); </script> </body> </html>